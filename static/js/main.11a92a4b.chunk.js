(this["webpackJsonpmvm-web"]=this["webpackJsonpmvm-web"]||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t);a(77);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(151),u=a(157),l=(a(37),a(29)),m=(a(160),a(59)),s=a(41),h=a(42),p=a.n(h),d=function(){function e(){Object(m.a)(this,e),this._isAuthenticated=void 0,this._isAuthenticated=!1}return Object(s.a)(e,[{key:"isAuthenticated",get:function(){return this._isAuthenticated}}]),Object(s.a)(e,[{key:"authenticate",value:function(){var e=this;return new Promise((function(t,a){e._isAuthenticated&&t();var n="";try{n=String(localStorage.getItem("token"))}catch(o){console.error("Local Storage not supported")}n||(e.removeAuth(),a());var r={method:"GET",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(n)}};p()(r).then((function(n){n&&200===n.status?(e.addAuth(),t()):(e.removeAuth(),a())})).catch((function(){e.removeAuth(),a()}))}))}},{key:"signIn",value:function(e,t){var a=this;return new Promise((function(n,r){var o={method:"POST",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/login/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{username:e,password:t}};p()(o).then((function(e){e&&201===e.status?(a.addAuth(e.data.token),n()):(a.removeAuth(),r())})).catch((function(){a.removeAuth(),r()}))}))}},{key:"signOut",value:function(){var e=this;return new Promise((function(t){e.removeAuth(),t()}))}},{key:"addAuth",value:function(e){if(e)try{localStorage.setItem("token",e)}catch(t){console.error("Local Storage not supported")}this._isAuthenticated=!0}},{key:"removeAuth",value:function(){try{localStorage.removeItem("token")}catch(e){console.error("Local Storage not supported")}this._isAuthenticated=!1}}]),e}(),v=a(152),g=a(156),f=a(154),b=a(155),y=a(158),w=a(153),E=a(159),A=a(61),k=a.n(A),S=a(66),j=a(60),O=a(150),C=a(62),I=a.n(C),T=a(149),W=function(){return r.a.createElement(S.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(T.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ".concat((new Date).getFullYear(),"."))},x=Object(j.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},card:{minWidth:275},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),N=function(e){var t=e.authService,a=x(),o=Object(n.useState)(!1),c=Object(l.a)(o,2),u=c[0],m=c[1],s=Object(n.useState)(!1),h=Object(l.a)(s,2),p=h[0],d=h[1];return r.a.createElement(O.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(v.a,{className:a.avatar},r.a.createElement(k.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,onSubmit:function(e){e.preventDefault(),d(!0);var a=new FormData(e.currentTarget),n=String(a.get("username")),r=String(a.get("password"));t.signIn(n,r).then((function(){d(!1)})).catch((function(){d(!1),m(!0)}))}},r.a.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(){return m(!1)}}),r.a.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(){return m(!1)}}),r.a.createElement(w.a,{control:r.a.createElement(E.a,{value:"remember",color:"primary"}),label:"Remember me"}),u&&r.a.createElement(f.a,{className:a.card},r.a.createElement(b.a,null,r.a.createElement(S.a,{variant:"body1",component:"p",color:"error"},"Incorrect username and / or password."))),p?r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,disabled:!0},r.a.createElement(I.a,null)):r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"))),r.a.createElement(W,null))},_=function(){var e=Object(n.useState)(new d),t=Object(l.a)(e,1)[0];return console.log("/api/auth/login/"),r.a.createElement(N,{authService:t})},F=a(64),P=a.n(F),D=a(65),B=Object(D.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:P.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(u.a,{theme:B},r.a.createElement(i.a,null),r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,t,a){e.exports=a(112)}},[[76,1,2]]]);
//# sourceMappingURL=main.11a92a4b.chunk.js.map