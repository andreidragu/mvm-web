(this["webpackJsonpmvm-web"]=this["webpackJsonpmvm-web"]||[]).push([[0],{108:function(e,t,a){e.exports=a(144)},144:function(e,t,a){"use strict";a.r(t);a(109);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=a(186),i=a(202),m=a(94),u=a(47),s=a(32),p=a(43),d=a(31),E=a(61),b=a.n(E),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{t?localStorage.setItem("token",e):sessionStorage.setItem("token",e)}catch(a){console.error("Local Storage not supported")}},h=function(){try{localStorage.removeItem("token"),sessionStorage.removeItem("token")}catch(e){console.error("Local Storage not supported")}};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={isLoading:!0},y=Object(n.createContext)(v),w=function(){return Object(n.useContext)(y)},j=function(e){var t=Object(n.useState)(v),a=Object(d.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){new Promise((function(e,t){var a="";try{(a=String(localStorage.getItem("token")||""))||(a=String(sessionStorage.getItem("token")||""))}catch(r){console.error("Local Storage not supported")}if(a){var n={method:"GET",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/me"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(a)}};b()(n).then((function(n){n&&200===n.status?(f(),e({username:n.data.username,token:a})):(h(),t())})).catch((function(){h(),t()}))}else t()})).then((function(e){c(O({},e,{isLoading:!1}))})).catch((function(){c(O({},v,{isLoading:!1}))}))}),[]);var l=function(e){return c(e)},i=function(){return c(O({},v,{isLoading:!1}))},m=Object(n.useMemo)((function(){return function(e){return e}(O({},o,{onLogin:l,onLogout:i}))}),[o]);return r.a.createElement(y.Provider,Object.assign({value:m},e))},S=a(181),C=function(){return r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white"}},r.a.createElement(S.a,{disableShrink:!0,size:70}))},P=a(187),k=a(193),x=a(191),N=a(192),D=a(203),I=a(189),B=a(205),L=a(83),T=a.n(L),M=a(40),W=a(81),A=a(185),H=a(84),F=a.n(H),U=a(184),Y=function(){return r.a.createElement(M.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(U.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ".concat((new Date).getFullYear(),"."))},z=Object(W.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},card:{minWidth:275},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),_=function(){var e=z(),t=w().onLogin,a=Object(n.useState)(!1),o=Object(d.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)(!1),u=Object(d.a)(m,2),p=u[0],E=u[1],g=Object(n.useState)(!1),O=Object(d.a)(g,2),v=O[0],y=O[1],j=Object(s.g)(),S=(Object(s.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(A.a,{component:"main",maxWidth:"xs"},r.a.createElement(l.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(P.a,{className:e.avatar},r.a.createElement(T.a,null)),r.a.createElement(M.a,{component:"h1",variant:"h5"},"Conectare"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),E(!0);var a=new FormData(e.currentTarget);(function(e,t,a){return new Promise((function(n,r){var o={method:"POST",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/login/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{username:e,password:t}};b()(o).then((function(e){e&&201===e.status?(f(e.data.token,a),n({username:e.data.username,token:e.data.token})):(h(),r())})).catch((function(){h(),r()}))}))})(String(a.get("username")||""),String(a.get("password")||""),v).then((function(e){E(!1),t&&t(e),j.replace(S)})).catch((function(){E(!1),i(!0)}))}},r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Nume",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(){return i(!1)},disabled:p}),r.a.createElement(D.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Parola",type:"password",id:"password",autoComplete:"current-password",onChange:function(){return i(!1)},disabled:p}),r.a.createElement(I.a,{control:r.a.createElement(B.a,{value:"remember",color:"primary",onChange:function(e,t){y(t)},disabled:p}),label:"Tine-ma conectat"}),c&&r.a.createElement(x.a,{className:e.card},r.a.createElement(N.a,null,r.a.createElement(M.a,{variant:"body1",component:"p",color:"error"},"Nume sau parola incorecte! Incearca din nou."))),r.a.createElement(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:p},p?r.a.createElement(F.a,null):"Conectare"))),r.a.createElement(Y,null))},G=a(3),q=a(198),J=a(199),R=a(190),X=a(200),$=a(206),K=a(201),Q=a(188),V=a(194),Z=a(195),ee=a(196),te=a(197),ae=a(89),ne=a.n(ae),re=a(90),oe=a.n(re),ce=a(91),le=a.n(ce),ie=a(57),me=a.n(ie),ue=a(56),se=a.n(ue),pe=a(55),de=a.n(pe),Ee=a(85),be=a.n(Ee),fe=a(86),he=a.n(fe),ge=a(87),Oe=a.n(ge),ve=a(88),ye=a.n(ve),we=r.a.createElement("div",null,r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(be.a,null)),r.a.createElement(ee.a,{primary:"Panou principal"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(he.a,null)),r.a.createElement(ee.a,{primary:"Aparate"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(ee.a,{primary:"Ingrediente"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(ye.a,null)),r.a.createElement(ee.a,{primary:"Locatii"})));r.a.createElement("div",null,r.a.createElement(te.a,{inset:!0},"Contul meu"),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(de.a,null)),r.a.createElement(ee.a,{primary:"Detalii cont"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(se.a,null)),r.a.createElement(ee.a,{primary:"Schimbare parola"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(me.a,null)),r.a.createElement(ee.a,{primary:"Deconectare"})));function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ce,Pe=Object(W.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Se({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(p.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));!function(e){e.HOME="main",e.MY_ACCOUNT="my_account"}(Ce||(Ce={}));var ke=function(e){var t=e.tab,a=Pe(),o=Object(n.useState)(!0),c=Object(d.a)(o,2),i=c[0],m=c[1],u=Object(s.g)(),p=Object(s.h)(),E=w().onLogout;return r.a.createElement("div",{className:a.root},r.a.createElement(l.a,null),r.a.createElement(q.a,{position:"absolute",className:Object(G.a)(a.appBar,i&&a.appBarShift)},r.a.createElement(J.a,{className:a.toolbar},r.a.createElement(R.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){m(!0)},className:Object(G.a)(a.menuButton,i&&a.menuButtonHidden)},r.a.createElement(ne.a,null)),r.a.createElement(M.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Panou principal"),r.a.createElement(R.a,{color:"inherit"},r.a.createElement(X.a,{badgeContent:0,color:"secondary"},r.a.createElement(oe.a,null))))),r.a.createElement($.a,{variant:"permanent",classes:{paper:Object(G.a)(a.drawerPaper,!i&&a.drawerPaperClose)},open:i},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(R.a,{onClick:function(){m(!1)}},r.a.createElement(le.a,null))),r.a.createElement(K.a,null),r.a.createElement(Q.a,null,we),r.a.createElement(K.a,null),r.a.createElement(Q.a,null,r.a.createElement(te.a,{inset:!0},"Contul meu"),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(de.a,null)),r.a.createElement(ee.a,{primary:"Detalii cont"})),r.a.createElement(V.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(se.a,null)),r.a.createElement(ee.a,{primary:"Schimbare parola"})),r.a.createElement(V.a,{button:!0,onClick:function(){new Promise((function(e){h(),e()})).then((function(){E&&E(),u.replace("/login",{from:p})}))}},r.a.createElement(Z.a,null,r.a.createElement(me.a,null)),r.a.createElement(ee.a,{primary:"Deconectare"})))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(A.a,{maxWidth:"xl",className:a.container},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce.HOME;switch(e){case Ce.HOME:return r.a.createElement("h1",null,"Dashboard");case Ce.MY_ACCOUNT:return r.a.createElement("h1",null,"My Account");default:u.push("/404",{from:p})}}(t))))};ke.defaultProps={tab:Ce.HOME};var xe=ke,Ne=function(){var e=w(),t=e.isLoading,a=e.username;return t?r.a.createElement(C,null):r.a.createElement(s.d,null,r.a.createElement(s.a,{exact:!0,from:"/",to:"/dashboard"}),r.a.createElement(s.b,{path:"/login",render:function(){return a?r.a.createElement(s.a,{to:"/dashboard"}):r.a.createElement(_,null)}}),r.a.createElement(De,{path:"/dashboard",render:function(){return r.a.createElement(xe,{tab:Ce.HOME})}}),r.a.createElement(De,{path:"/myaccount",render:function(){return r.a.createElement(xe,{tab:Ce.MY_ACCOUNT})}}),r.a.createElement(s.b,{path:"/forbidden",component:function(){return r.a.createElement("h1",null,"Forbidden")}}),r.a.createElement(s.b,{component:function(){return r.a.createElement("h1",null,"404 Not found")}}))},De=function(e){var t=e.path,a=e.render,n=Object(m.a)(e,["path","render"]),o=w().username?a:function(){return r.a.createElement(s.a,{to:{pathname:"/login",state:{from:t}}})};return r.a.createElement(s.b,Object.assign({},n,{render:o}))},Ie=function(){return r.a.createElement(u.a,{basename:"/mvm-web"},r.a.createElement(j,null,r.a.createElement(Ne,null)))},Be=a(92),Le=a.n(Be),Te=a(93),Me=Object(Te.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Le.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{theme:Me},r.a.createElement(l.a,null),r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[108,1,2]]]);