(this["webpackJsonpmvm-web"]=this["webpackJsonpmvm-web"]||[]).push([[0],{404:function(e,t,a){e.exports=a(824)},824:function(e,t,a){"use strict";a.r(t);a(405),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(428),a(429),a(430),a(173),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(453),a(454),a(455),a(456),a(457),a(459),a(460),a(461),a(462),a(463),a(464),a(465),a(466),a(467),a(468),a(469),a(470),a(471),a(473),a(474),a(475),a(476),a(477),a(478),a(479),a(480),a(482),a(483),a(484),a(485),a(486),a(487),a(488),a(489),a(490),a(491),a(492),a(493),a(494),a(495),a(496),a(497),a(498),a(499),a(500),a(501),a(502),a(504),a(505),a(506),a(507),a(510),a(511),a(512),a(514),a(515),a(516),a(517),a(518),a(519),a(520),a(521),a(522),a(523),a(524),a(525),a(526),a(527),a(528),a(529),a(530),a(531),a(532),a(298),a(533),a(534),a(535),a(536),a(537),a(538),a(539),a(540),a(541),a(542),a(543),a(544),a(545),a(546),a(547),a(548),a(549),a(550),a(551),a(552),a(553),a(554),a(555),a(556),a(557),a(558),a(560),a(561),a(562),a(563),a(564),a(565),a(566),a(567),a(568),a(569),a(570),a(571),a(572),a(573),a(574),a(575),a(576),a(577),a(578),a(579),a(580),a(581),a(582),a(583),a(584),a(585),a(586),a(587),a(588),a(589),a(590),a(591),a(592),a(593),a(594),a(595),a(597),a(598),a(599),a(600),a(603),a(307),a(604),a(613),a(792);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),i=a(871),l=a(888),u=a(395),m=a(83),s=a(106),p=a(166),d=a(105),E=a(253),b=a.n(E),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{t?localStorage.setItem("token",e):sessionStorage.setItem("token",e)}catch(a){console.error("Local Storage not supported")}},g=function(){try{localStorage.removeItem("token"),sessionStorage.removeItem("token")}catch(e){console.error("Local Storage not supported")}},h=a(254),O=a.n(h),S=a(378);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={isLoading:!0},N=Object(n.createContext)(y),j=function(){return Object(n.useContext)(N)},D=function(e){var t=Object(n.useState)(y),a=Object(d.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){new Promise((function(e,t){var a="";try{(a=String(localStorage.getItem("token")||""))||(a=String(sessionStorage.getItem("token")||""))}catch(r){console.error("Local Storage not supported")}if(a){var n={method:"GET",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/me"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(a)}};b()(n).then((function(n){n&&200===n.status?(f(),e({username:n.data.username,token:a})):(g(),t())})).catch((function(){g(),t()}))}else t()})).then((function(e){c(v({},e,{isLoading:!1}))})).catch((function(){c(v({},y,{isLoading:!1}))})),window.requestIdleCallback((function(){O.a.getPromise({preprocessor:function(e,t){if("userAgent"===e){var a=new S.UAParser(t);return((a.getDevice().model||"")+" "+(a.getDevice().type||"")+" "+(a.getDevice().vendor||"")+" "+(a.getOS().name||"")+" "+(a.getOS().version||"")+" "+(a.getBrowser().name||"")+" "+(a.getEngine().name||"")+" "+(a.getCPU().architecture||"")).trim()}return t}}).then((function(e){console.log("Supported",e);var t=e.map((function(e){return e.value})),a=O.a.x64hash128(t.join(""),31);console.log("Supported",a)}))}))}),[]);var i=function(e){return c(e)},l=function(){return c(v({},y,{isLoading:!1}))},u=Object(n.useMemo)((function(){return function(e){return e}(v({},o,{onLogin:i,onLogout:l}))}),[o]);return r.a.createElement(N.Provider,Object.assign({value:u},e))},C=a(867),A=function(){return r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white"}},r.a.createElement(C.a,{disableShrink:!0,size:70}))},I=a(872),P=a(878),T=a(876),k=a(877),L=a(889),x=a(874),R=a(891),B=a(381),H=a.n(B),G=a(135),U=a(379),W=a(870),_=a(382),F=a.n(_),M=a(869),q=function(){return r.a.createElement(G.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(M.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ".concat((new Date).getFullYear(),"."))},z=Object(U.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},card:{minWidth:275},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(){var e=z(),t=j().onLogin,a=Object(n.useState)(!1),o=Object(d.a)(a,2),c=o[0],l=o[1],u=Object(n.useState)(!1),m=Object(d.a)(u,2),p=m[0],E=m[1],h=Object(n.useState)(!1),O=Object(d.a)(h,2),S=O[0],w=O[1],v=Object(s.g)(),y=(Object(s.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(W.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(I.a,{className:e.avatar},r.a.createElement(H.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h5"},"Conectare"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),E(!0);var a=new FormData(e.currentTarget);(function(e,t,a){return new Promise((function(n,r){var o={method:"POST",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/login/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{username:e,password:t}};b()(o).then((function(e){e&&201===e.status?(f(e.data.token,a),n({username:e.data.username,token:e.data.token})):(g(),r())})).catch((function(){g(),r()}))}))})(String(a.get("username")||""),String(a.get("password")||""),S).then((function(e){E(!1),t&&t(e),v.replace(y)})).catch((function(){E(!1),l(!0)}))}},r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Nume",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(){return l(!1)},disabled:p}),r.a.createElement(L.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Parola",type:"password",id:"password",autoComplete:"current-password",onChange:function(){return l(!1)},disabled:p}),r.a.createElement(x.a,{control:r.a.createElement(R.a,{value:"remember",color:"primary",onChange:function(e,t){w(t)},disabled:p}),label:"Tine-ma conectat"}),c&&r.a.createElement(T.a,{className:e.card},r.a.createElement(k.a,null,r.a.createElement(G.a,{variant:"body1",component:"p",color:"error"},"Nume sau parola incorecte! Incearca din nou."))),r.a.createElement(P.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:p},p?r.a.createElement(F.a,null):"Conectare"))),r.a.createElement(q,null))},Y=a(5),X=a(49),$=a(879),K=a(880),Q=a(881),V=a(875),Z=a(882),ee=a(892),te=a(883),ae=a(873),ne=a(884),re=a(885),oe=a(886),ce=a(887),ie=a(383),le=a.n(ie),ue=a(384),me=a.n(ue),se=a(385),pe=a.n(se),de=a(386),Ee=a.n(de),be=a(387),fe=a.n(be),ge=a(388),he=a.n(ge),Oe=a(389),Se=a.n(Oe),we=a(390),ve=a.n(we),ye=a(391),Ne=a.n(ye),je=a(392),De=a.n(je);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ie,Pe=Object(U.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Ae({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(p.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));!function(e){e.HOME="/",e.LOGIN="/login",e.DASHBOARD="/dashboard",e.MACHINES="/machines",e.INGREDIENTS="/ingredients",e.LOCATIONS="/locations",e.USERS="/users",e.ACCOUNT_DETAILS="/account_details",e.CHANGE_PASSWORD="/change_password",e.FORBIDDEN="/forbidden",e.NOT_FOUND="/404"}(Ie||(Ie={}));var Te=new Map([[Ie.DASHBOARD,"Panou principal"],[Ie.MACHINES,"Aparate"],[Ie.INGREDIENTS,"Ingrediente"],[Ie.LOCATIONS,"Locatii"],[Ie.USERS,"Personal"],[Ie.ACCOUNT_DETAILS,"Detalii cont"],[Ie.CHANGE_PASSWORD,"Schimbare parola"]]),ke=function(e){var t=e.tab,a=Pe(),o=Object(X.a)(),c=Object($.a)(o.breakpoints.up("md"),{noSsr:!0}),l=Object(n.useState)(c),u=Object(d.a)(l,2),p=u[0],E=u[1],b=Object(s.g)(),f=Object(s.h)(),h=j(),O=h.username,S=h.onLogout;return r.a.createElement("div",{className:a.root},r.a.createElement(i.a,null),r.a.createElement(K.a,{position:"absolute",className:Object(Y.a)(a.appBar,p&&a.appBarShift)},r.a.createElement(Q.a,{className:a.toolbar},r.a.createElement(V.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){E(!0)},className:Object(Y.a)(a.menuButton,p&&a.menuButtonHidden)},r.a.createElement(le.a,null)),r.a.createElement(G.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},Te.get(t)),r.a.createElement(V.a,{color:"inherit"},r.a.createElement(Z.a,{badgeContent:0,color:"secondary"},r.a.createElement(me.a,null))))),r.a.createElement(ee.a,{variant:"permanent",classes:{paper:Object(Y.a)(a.drawerPaper,!p&&a.drawerPaperClose)},open:p},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(V.a,{onClick:function(){E(!1)}},r.a.createElement(pe.a,null))),r.a.createElement(te.a,null),r.a.createElement(ae.a,null,r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.DASHBOARD},r.a.createElement(re.a,null,r.a.createElement(Ee.a,null)),r.a.createElement(oe.a,{primary:"Panou principal"})),r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.MACHINES},r.a.createElement(re.a,null,r.a.createElement(fe.a,null)),r.a.createElement(oe.a,{primary:"Aparate"})),r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.INGREDIENTS},r.a.createElement(re.a,null,r.a.createElement(he.a,null)),r.a.createElement(oe.a,{primary:"Ingrediente"})),r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.LOCATIONS},r.a.createElement(re.a,null,r.a.createElement(Se.a,null)),r.a.createElement(oe.a,{primary:"Locatii"}))),r.a.createElement(te.a,null),r.a.createElement(ae.a,null,r.a.createElement(ce.a,{inset:!0},"Utilizator: ",r.a.createElement("b",null,O)),r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.ACCOUNT_DETAILS},r.a.createElement(re.a,null,r.a.createElement(ve.a,null)),r.a.createElement(oe.a,{primary:"Detalii cont"})),r.a.createElement(ne.a,{button:!0,component:m.b,to:Ie.CHANGE_PASSWORD},r.a.createElement(re.a,null,r.a.createElement(Ne.a,null)),r.a.createElement(oe.a,{primary:"Schimbare parola"})),r.a.createElement(ne.a,{button:!0,onClick:function(){new Promise((function(e){g(),e()})).then((function(){S&&S(),b.replace(Ie.LOGIN,{from:f})}))}},r.a.createElement(re.a,null,r.a.createElement(De.a,null)),r.a.createElement(oe.a,{primary:"Deconectare"})))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(W.a,{maxWidth:"xl",className:a.container},function(){var e=Te.get(t);if(e)return r.a.createElement("h1",null,e);b.push(Ie.NOT_FOUND,{from:f})}())))},Le=function(){var e=j(),t=e.isLoading,a=e.username;return t?r.a.createElement(A,null):r.a.createElement(s.d,null,r.a.createElement(s.a,{exact:!0,from:Ie.HOME,to:Ie.DASHBOARD}),r.a.createElement(s.b,{path:Ie.LOGIN,render:function(){return a?r.a.createElement(s.a,{to:Ie.DASHBOARD}):r.a.createElement(J,null)}}),r.a.createElement(xe,{path:Ie.DASHBOARD,render:function(){return r.a.createElement(ke,{tab:Ie.DASHBOARD})}}),r.a.createElement(xe,{path:Ie.MACHINES,render:function(){return r.a.createElement(ke,{tab:Ie.MACHINES})}}),r.a.createElement(xe,{path:Ie.INGREDIENTS,render:function(){return r.a.createElement(ke,{tab:Ie.INGREDIENTS})}}),r.a.createElement(xe,{path:Ie.LOCATIONS,render:function(){return r.a.createElement(ke,{tab:Ie.LOCATIONS})}}),r.a.createElement(xe,{path:Ie.USERS,render:function(){return r.a.createElement(ke,{tab:Ie.USERS})}}),r.a.createElement(xe,{path:Ie.ACCOUNT_DETAILS,render:function(){return r.a.createElement(ke,{tab:Ie.ACCOUNT_DETAILS})}}),r.a.createElement(xe,{path:Ie.CHANGE_PASSWORD,render:function(){return r.a.createElement(ke,{tab:Ie.CHANGE_PASSWORD})}}),r.a.createElement(s.b,{path:Ie.FORBIDDEN,component:function(){return r.a.createElement("h1",null,"Forbidden")}}),r.a.createElement(s.b,{component:function(){return r.a.createElement("h1",null,"404 Not found")}}))},xe=function(e){var t=e.path,a=e.render,n=Object(u.a)(e,["path","render"]),o=j().username?a:function(){return r.a.createElement(s.a,{to:{pathname:Ie.LOGIN,state:{from:t}}})};return r.a.createElement(s.b,Object.assign({},n,{render:o}))},Re=function(){return r.a.createElement(m.a,{basename:"/mvm-web"},r.a.createElement(D,null,r.a.createElement(Le,null)))},Be=a(393),He=a.n(Be),Ge=a(394),Ue=Object(Ge.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:He.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},c.a.render(r.a.createElement(l.a,{theme:Ue},r.a.createElement(i.a,null),r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[404,1,2]]]);