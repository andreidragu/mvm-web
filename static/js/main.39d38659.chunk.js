(this["webpackJsonpmvm-web"]=this["webpackJsonpmvm-web"]||[]).push([[0],{110:function(e,t,a){e.exports=a(146)},146:function(e,t,a){"use strict";a.r(t);a(111);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=a(188),l=a(204),u=a(57),m=a(26),s=a(46),p=a(32),h=a(183),d=function(){return r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white"}},r.a.createElement(h.a,{disableShrink:!0,size:70}))},E=a(83),f=a(61),b=a(62),g=a.n(b),v=function(){function e(){Object(E.a)(this,e),this._isAuthenticated=void 0,this._isAuthenticated=!1}return Object(f.a)(e,[{key:"isAuthenticated",get:function(){return this._isAuthenticated}}],[{key:"getInstance",value:function(){return this._instance||(e._instance=new e),this._instance}}]),Object(f.a)(e,[{key:"authenticate",value:function(){var e=this;return new Promise((function(t,a){if(e._isAuthenticated)t();else{var n="";try{(n=String(localStorage.getItem("token")||""))||(n=String(sessionStorage.getItem("token")||""))}catch(c){console.error("Local Storage not supported")}if(!n)return e.removeAuth(),void a();var r={method:"GET",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(n)}};g()(r).then((function(n){n&&200===n.status?(e.addAuth(),t()):(e.removeAuth(),a())})).catch((function(){e.removeAuth(),a()}))}}))}},{key:"signIn",value:function(e,t,a){var n=this;return new Promise((function(r,c){var o={method:"POST",url:"".concat("https://virtusloop-mvm-api.herokuapp.com").concat("/api/auth/login/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},data:{username:e,password:t}};g()(o).then((function(e){e&&201===e.status?(n.addAuth(e.data.token,a),r()):(n.removeAuth(),c())})).catch((function(){n.removeAuth(),c()}))}))}},{key:"signOut",value:function(){var e=this;return new Promise((function(t){e.removeAuth(),t()}))}},{key:"addAuth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{t?localStorage.setItem("token",e):sessionStorage.setItem("token",e)}catch(a){console.error("Local Storage not supported")}this._isAuthenticated=!0}},{key:"removeAuth",value:function(){try{localStorage.removeItem("token"),sessionStorage.removeItem("token")}catch(e){console.error("Local Storage not supported")}this._isAuthenticated=!1}}]),e}();v._instance=void 0;var y=v,O=a(189),w=a(195),j=a(193),S=a(194),k=a(205),A=a(191),x=a(207),C=a(86),I=a.n(C),P=a(40),N=a(84),B=a(187),D=a(87),W=a.n(D),T=a(186),_=function(){return r.a.createElement(P.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(T.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ".concat((new Date).getFullYear(),"."))},F=Object(N.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},card:{minWidth:275},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),L=function(e){var t=e.authService,a=F(),c=Object(n.useState)(!1),o=Object(m.a)(c,2),l=o[0],u=o[1],s=Object(n.useState)(!1),h=Object(m.a)(s,2),d=h[0],E=h[1],f=Object(n.useState)(!1),b=Object(m.a)(f,2),g=b[0],v=b[1],y=Object(p.g)(),C=(Object(p.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(B.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(O.a,{className:a.avatar},r.a.createElement(I.a,null)),r.a.createElement(P.a,{component:"h1",variant:"h5"},"Conectare"),r.a.createElement("form",{className:a.form,onSubmit:function(e){e.preventDefault(),E(!0);var a=new FormData(e.currentTarget),n=String(a.get("username")||""),r=String(a.get("password")||"");t.signIn(n,r,g).then((function(){E(!1),y.replace(C)})).catch((function(){E(!1),u(!0)}))}},r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Nume",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(){return u(!1)}}),r.a.createElement(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Parola",type:"password",id:"password",autoComplete:"current-password",onChange:function(){return u(!1)}}),r.a.createElement(A.a,{control:r.a.createElement(x.a,{value:"remember",color:"primary",onChange:function(e,t){v(t)}}),label:"Tine-ma conectat"}),l&&r.a.createElement(j.a,{className:a.card},r.a.createElement(S.a,null,r.a.createElement(P.a,{variant:"body1",component:"p",color:"error"},"Nume sau parola incorecte! Incearca din nou."))),d?r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,disabled:!0},r.a.createElement(W.a,null)):r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Conectare"))),r.a.createElement(_,null))},z=a(65),G=a(3),H=a(200),q=a(201),J=a(192),R=a(202),U=a(208),Y=a(203),X=a(190),$=a(196),K=a(197),M=a(198),Q=a(199),V=a(92),Z=a.n(V),ee=a(93),te=a.n(ee),ae=a(94),ne=a.n(ae),re=a(56),ce=a.n(re),oe=a(55),ie=a.n(oe),le=a(54),ue=a.n(le),me=a(88),se=a.n(me),pe=a(89),he=a.n(pe),de=a(90),Ee=a.n(de),fe=a(91),be=a.n(fe),ge=r.a.createElement("div",null,r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(se.a,null)),r.a.createElement(M.a,{primary:"Panou principal"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(he.a,null)),r.a.createElement(M.a,{primary:"Aparate"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(Ee.a,null)),r.a.createElement(M.a,{primary:"Ingrediente"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(be.a,null)),r.a.createElement(M.a,{primary:"Locatii"})));r.a.createElement("div",null,r.a.createElement(Q.a,{inset:!0},"Contul meu"),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ue.a,null)),r.a.createElement(M.a,{primary:"Detalii cont"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ie.a,null)),r.a.createElement(M.a,{primary:"Schimbare parola"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ce.a,null)),r.a.createElement(M.a,{primary:"Deconectare"})));function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach((function(t){Object(z.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Oe=Object(N.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:ye({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(z.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),we=function(e){var t=e.authService,a=Oe(),n=r.a.useState(!0),c=Object(m.a)(n,2),o=c[0],l=c[1],u=Object(p.g)(),s=(Object(p.h)().state||{from:{pathname:"/dashboard"}}).from;return r.a.createElement("div",{className:a.root},r.a.createElement(i.a,null),r.a.createElement(H.a,{position:"absolute",className:Object(G.a)(a.appBar,o&&a.appBarShift)},r.a.createElement(q.a,{className:a.toolbar},r.a.createElement(J.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},className:Object(G.a)(a.menuButton,o&&a.menuButtonHidden)},r.a.createElement(Z.a,null)),r.a.createElement(P.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"Panou principal"),r.a.createElement(J.a,{color:"inherit"},r.a.createElement(R.a,{badgeContent:0,color:"secondary"},r.a.createElement(te.a,null))))),r.a.createElement(U.a,{variant:"permanent",classes:{paper:Object(G.a)(a.drawerPaper,!o&&a.drawerPaperClose)},open:o},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(J.a,{onClick:function(){l(!1)}},r.a.createElement(ne.a,null))),r.a.createElement(Y.a,null),r.a.createElement(X.a,null,ge),r.a.createElement(Y.a,null),r.a.createElement(X.a,null,r.a.createElement(Q.a,{inset:!0},"Contul meu"),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ue.a,null)),r.a.createElement(M.a,{primary:"Detalii cont"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ie.a,null)),r.a.createElement(M.a,{primary:"Schimbare parola"})),r.a.createElement($.a,{button:!0},r.a.createElement(K.a,null,r.a.createElement(ce.a,null)),r.a.createElement(M.a,{primary:"Deconectare",onClick:function(){t.signOut().then((function(){u.replace(s)}))}})))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(B.a,{maxWidth:"lg",className:a.container},r.a.createElement("h1",null,"Welcome"))))},je=function(e){var t=e.authService,a=e.children,n=Object(u.a)(e,["authService","children"]),c=Object(p.g)(),o=Object(p.h)(),i=(o.state||{from:{pathname:"/"}}).from,l=function(){t.isAuthenticated?c.replace(i):c.push("/signin",{from:o})};return r.a.createElement(p.b,Object.assign({},n,{render:function(e){var n=e.location;return t.isAuthenticated?r.a.createElement(p.a,{to:{pathname:"/dashboard",state:{from:n}}}):(l(),a)}}))},Se=function(e){var t=e.authService,a=e.children,n=Object(u.a)(e,["authService","children"]),c=Object(p.g)(),o=(Object(p.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(p.b,Object.assign({},n,{render:function(e){var n=e.location;return t.isAuthenticated?r.a.createElement(p.a,{to:{pathname:"/dashboard",state:{from:n}}}):(t.isAuthenticated&&c.replace(o),a)}}))},ke=function(e){var t=e.authService,a=e.children,n=Object(u.a)(e,["authService","children"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){var n=e.location;return t.isAuthenticated?a:r.a.createElement(p.a,{to:{pathname:"/signin",state:{from:n}}})}}))},Ae=function(){var e=Object(n.useState)(y.getInstance()),t=Object(m.a)(e,1)[0],a=Object(n.useState)(!0),c=Object(m.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){t.authenticate().then((function(){i(!1)})).catch((function(){i(!1)}))}),[t]),r.a.createElement(s.a,{basename:"/mvm-web"},r.a.createElement(p.d,null,r.a.createElement(je,{authService:t,path:"/",exact:!0},r.a.createElement(d,null)),r.a.createElement(Se,{authService:t,path:"/signin"},o?r.a.createElement(d,null):r.a.createElement(L,{authService:t})),r.a.createElement(ke,{authService:t,path:"/dashboard"},o?r.a.createElement(d,null):r.a.createElement(we,{authService:t})),r.a.createElement(p.b,{component:function(){return r.a.createElement("h1",null,"404 Not found")}})))},xe=a(95),Ce=a.n(xe),Ie=a(96),Pe=Object(Ie.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Ce.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,{theme:Pe},r.a.createElement(i.a,null),r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[110,1,2]]]);