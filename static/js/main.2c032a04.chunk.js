(this["webpackJsonpmvm-web"]=this["webpackJsonpmvm-web"]||[]).push([[0],{245:function(e,t,a){e.exports=a(363)},363:function(e,t,a){"use strict";a.r(t);a(246);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=a(408),l=a(418),s=a(221),u=a(57),m=a(75),p=a(80),d=a(56),f=a(142),E=a.n(f),b=function(e,t){return new Promise((function(a,n){var r="",o=!0;try{(r=String(localStorage.getItem("token")||""))||(o=!1,r=String(sessionStorage.getItem("token")||""))}catch(i){o=!1,console.error("Local Storage not supported")}if(r){var c={method:"GET",url:"".concat("https://virtusloop-mvm-api.herokuapp.com/").concat("api/auth/me/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer ".concat(r),"X-Browser-Hash":e}};t&&(c.headers["X-Refresh-Token"]=t),E()(c).then((function(e){if(e&&200===e.status){var t=e.headers["x-token"],r=e.headers["x-refresh-token"];h(t,o),a({username:e.data.username,role:e.data.role,refreshToken:r})}else g(),n()})).catch((function(){g(),n()}))}else n()}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e)try{t?localStorage.setItem("token",e):sessionStorage.setItem("token",e)}catch(a){console.error("Local Storage not supported")}},g=function(){try{localStorage.removeItem("token"),sessionStorage.removeItem("token")}catch(e){console.error("Local Storage not supported")}},O=a(143),S=a.n(O),w=a(197);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j={isLoading:!0,username:"",role:"",refreshToken:""},N=Object(n.createContext)(j),D=function(){return Object(n.useContext)(N)},A=function(e){var t=Object(n.useState)(j),a=Object(d.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){window.requestIdleCallback((function(){S.a.getPromise({preprocessor:function(e,t){if("userAgent"===e){var a=new w.UAParser(t);return((a.getDevice().model||"")+" "+(a.getDevice().type||"")+" "+(a.getDevice().vendor||"")+" "+(a.getOS().name||"")+" "+(a.getOS().version||"")+" "+(a.getBrowser().name||"")+" "+(a.getEngine().name||"")+" "+(a.getCPU().architecture||"")).trim()}return t}}).then((function(e){var t=e.map((function(e){return e.value})),a=S.a.x64hash128(t.join(""),31);b(a).then((function(e){c(y({},e,{isLoading:!1,browserHash:a}))})).catch((function(){c(y({},j,{isLoading:!1,browserHash:a}))}))}))}))}),[]);var i=function(e){return c(e)},l=function(e){return c(y({},j,{isLoading:!1,browserHash:e}))},s=Object(n.useMemo)((function(){return function(e){return e}(y({},o,{onLogin:i,onLogout:l}))}),[o]);return r.a.createElement(N.Provider,Object.assign({value:s},e))},I=a(164),P=function(){return r.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white"}},r.a.createElement(I.a,{disableShrink:!0,size:70}))},C=a(409),R=a(170),T=a(414),k=a(415),H=a(195),x=a(168),B=a(194),L=a(200),G=a.n(L),M=a(66),U=a(198),W=a(407),F=a(201),_=a.n(F),Y=a(406),q=function(){return r.a.createElement(M.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Y.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ".concat((new Date).getFullYear(),"."))};function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=Object(U.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},card:{minWidth:275},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(){var e=X(),t=D(),a=t.browserHash,o=void 0===a?"":a,c=t.onLogin,l=Object(n.useState)(!1),s=Object(d.a)(l,2),u=s[0],f=s[1],b=Object(n.useState)(!1),O=Object(d.a)(b,2),S=O[0],w=O[1],v=Object(n.useState)(!1),y=Object(d.a)(v,2),j=y[0],N=y[1],A=Object(m.g)(),I=(Object(m.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement(W.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(C.a,{className:e.avatar},r.a.createElement(G.a,null)),r.a.createElement(M.a,{component:"h1",variant:"h5"},"Conectare"),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),w(!0);var t=new FormData(e.currentTarget);(function(e,t,a,n){return new Promise((function(r,o){var c={method:"POST",url:"".concat("https://virtusloop-mvm-api.herokuapp.com/").concat("api/auth/login/"),headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8","X-Browser-Hash":a},data:{username:e,password:t}};E()(c).then((function(e){if(e&&201===e.status){var t=e.headers["x-token"],a=e.headers["x-refresh-token"];h(t,n),r({username:e.data.username,role:e.data.role,refreshToken:a})}else g(),o()})).catch((function(){g(),o()}))}))})(String(t.get("username")||""),String(t.get("password")||""),o,j).then((function(e){w(!1),c&&c(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{browserHash:o})),A.replace(I)})).catch((function(){w(!1),f(!0)}))}},r.a.createElement(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Nume",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(){return f(!1)},disabled:S}),r.a.createElement(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Parola",type:"password",id:"password",autoComplete:"current-password",onChange:function(){return f(!1)},disabled:S}),r.a.createElement(x.a,{control:r.a.createElement(B.a,{value:"remember",color:"primary",onChange:function(e,t){N(t)},disabled:S}),label:"Tine-ma conectat"}),u&&r.a.createElement(T.a,{className:e.card},r.a.createElement(k.a,null,r.a.createElement(M.a,{variant:"body1",component:"p",color:"error"},"Nume sau parola incorecte! Incearca din nou."))),r.a.createElement(R.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:S},S?r.a.createElement(_.a,null):"Conectare"))),r.a.createElement(q,null))},$=a(3),K=a(16),Q=a(419),V=a(420),Z=a(174),ee=a(169),te=a(421),ae=a(426),ne=a(422),re=a(413),oe=a(376),ce=a(423),ie=a(189),le=a(424),se=a(209),ue=a.n(se),me=a(210),pe=a.n(me),de=a(211),fe=a.n(de),Ee=a(212),be=a.n(Ee),he=a(213),ge=a.n(he),Oe=a(214),Se=a.n(Oe),we=a(215),ve=a.n(we),ye=a(216),je=a.n(ye),Ne=a(217),De=a.n(Ne),Ae=a(218),Ie=a.n(Ae),Pe=a(219),Ce=a.n(Pe),Re=a(202),Te=a.n(Re),ke=function(){var e=Object(n.useState)({columns:[{title:"Nume",field:"username"},{title:"Rol",field:"role"}],data:[{username:"test",role:"fara rol"}]}),t=Object(d.a)(e,2),a=t[0];t[1];return r.a.createElement(Te.a,{title:"Personal",columns:a.columns,data:a.data,editable:{onRowAdd:function(e){return new Promise((function(e){setTimeout((function(){e()}),600)}))},onRowUpdate:function(e,t){return new Promise((function(e){setTimeout((function(){e()}),600)}))},onRowDelete:function(e){return new Promise((function(e){setTimeout((function(){e()}),600)}))}}})};function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Be,Le=Object(U.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:xe({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(p.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));!function(e){e.HOME="/",e.LOGIN="/login",e.DASHBOARD="/dashboard",e.MACHINES="/machines",e.INGREDIENTS="/ingredients",e.LOCATIONS="/locations",e.USERS="/users",e.CHANGE_PASSWORD="/change_password",e.FORBIDDEN="/forbidden",e.NOT_FOUND="/404",e.TEMPORARY="/temporary"}(Be||(Be={}));var Ge=new Map([[Be.DASHBOARD,"Panou principal"],[Be.MACHINES,"Aparate"],[Be.INGREDIENTS,"Ingrediente"],[Be.LOCATIONS,"Locatii"],[Be.USERS,"Personal"],[Be.CHANGE_PASSWORD,"Schimbare parola"],[Be.TEMPORARY,"Temporar"]]),Me=function(e){var t=e.tab,a=Le(),o=Object(K.a)(),c=Object(Q.a)(o.breakpoints.up("md"),{noSsr:!0}),l=Object(n.useState)(c),s=Object(d.a)(l,2),p=s[0],f=s[1],E=Object(m.g)(),h=Object(m.h)(),O=D(),S=O.username,w=O.browserHash,v=void 0===w?"":w,y=O.refreshToken,j=O.onLogin,N=O.onLogout;return r.a.createElement("div",{className:a.root},r.a.createElement(i.a,null),r.a.createElement(V.a,{position:"absolute",className:Object($.a)(a.appBar,p&&a.appBarShift)},r.a.createElement(Z.a,{className:a.toolbar},r.a.createElement(ee.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){f(!0)},className:Object($.a)(a.menuButton,p&&a.menuButtonHidden)},r.a.createElement(ue.a,null)),r.a.createElement(M.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},Ge.get(t)),r.a.createElement(ee.a,{color:"inherit"},r.a.createElement(te.a,{badgeContent:0,color:"secondary"},r.a.createElement(pe.a,null))))),r.a.createElement(ae.a,{variant:"permanent",classes:{paper:Object($.a)(a.drawerPaper,!p&&a.drawerPaperClose)},open:p},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(ee.a,{onClick:function(){f(!1)}},r.a.createElement(fe.a,null))),r.a.createElement(ne.a,null),r.a.createElement(re.a,null,r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.DASHBOARD},r.a.createElement(ce.a,null,r.a.createElement(be.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.DASHBOARD)})),r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.MACHINES},r.a.createElement(ce.a,null,r.a.createElement(ge.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.MACHINES)})),r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.INGREDIENTS},r.a.createElement(ce.a,null,r.a.createElement(Se.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.INGREDIENTS)})),r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.LOCATIONS},r.a.createElement(ce.a,null,r.a.createElement(ve.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.LOCATIONS)})),r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.USERS},r.a.createElement(ce.a,null,r.a.createElement(je.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.USERS)}))),r.a.createElement(ne.a,null),r.a.createElement(re.a,null,r.a.createElement(le.a,{inset:!0},"Utilizator: ",r.a.createElement("b",null,S)),r.a.createElement(oe.a,{button:!0,onClick:function(){b(v,y).then((function(e){j&&j(xe({},e,{browserHash:v}))}))}},r.a.createElement(ce.a,null,r.a.createElement(De.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.TEMPORARY)})),r.a.createElement(oe.a,{button:!0,component:u.b,to:Be.CHANGE_PASSWORD},r.a.createElement(ce.a,null,r.a.createElement(Ie.a,null)),r.a.createElement(ie.a,{primary:Ge.get(Be.CHANGE_PASSWORD)})),r.a.createElement(oe.a,{button:!0,onClick:function(){new Promise((function(e){g(),e()})).then((function(){N&&N(v),E.replace(Be.LOGIN,{from:h})}))}},r.a.createElement(ce.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(ie.a,{primary:"Deconectare"})))),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(W.a,{maxWidth:"xl",className:a.container},function(){var e=Ge.get(t);if(e)switch(t){case Be.DASHBOARD:case Be.MACHINES:case Be.INGREDIENTS:case Be.LOCATIONS:return r.a.createElement("h1",null,e);case Be.USERS:return r.a.createElement(ke,null);default:E.push(Be.NOT_FOUND,{from:h})}else E.push(Be.NOT_FOUND,{from:h})}())))},Ue=function(){var e=D(),t=e.isLoading,a=e.username;return t?r.a.createElement(P,null):r.a.createElement(m.d,null,r.a.createElement(m.a,{exact:!0,from:Be.HOME,to:Be.DASHBOARD}),r.a.createElement(m.b,{path:Be.LOGIN,render:function(){return a?r.a.createElement(m.a,{to:Be.DASHBOARD}):r.a.createElement(J,null)}}),r.a.createElement(We,{path:Be.DASHBOARD,render:function(){return r.a.createElement(Me,{tab:Be.DASHBOARD})}}),r.a.createElement(We,{path:Be.MACHINES,render:function(){return r.a.createElement(Me,{tab:Be.MACHINES})}}),r.a.createElement(We,{path:Be.INGREDIENTS,render:function(){return r.a.createElement(Me,{tab:Be.INGREDIENTS})}}),r.a.createElement(We,{path:Be.LOCATIONS,render:function(){return r.a.createElement(Me,{tab:Be.LOCATIONS})}}),r.a.createElement(We,{path:Be.USERS,render:function(){return r.a.createElement(Me,{tab:Be.USERS})}}),r.a.createElement(We,{path:Be.TEMPORARY,render:function(){return r.a.createElement(Me,{tab:Be.TEMPORARY})}}),r.a.createElement(We,{path:Be.CHANGE_PASSWORD,render:function(){return r.a.createElement(Me,{tab:Be.CHANGE_PASSWORD})}}),r.a.createElement(m.b,{path:Be.FORBIDDEN,component:function(){return r.a.createElement("h1",null,"Forbidden")}}),r.a.createElement(m.b,{component:function(){return r.a.createElement("h1",null,"404 Not found")}}))},We=function(e){var t=e.path,a=e.render,n=Object(s.a)(e,["path","render"]),o=D().username?a:function(){return r.a.createElement(m.a,{to:{pathname:Be.LOGIN,state:{from:t}}})};return r.a.createElement(m.b,Object.assign({},n,{render:o}))},Fe=function(){return r.a.createElement(u.a,{basename:"/mvm-web"},r.a.createElement(A,null,r.a.createElement(Ue,null)))},_e=a(139),Ye=a.n(_e),qe=a(220),ze=Object(qe.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Ye.a.A400},background:{default:"#fff"}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)},c.a.render(r.a.createElement(l.a,{theme:ze},r.a.createElement(i.a,null),r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[245,1,2]]]);